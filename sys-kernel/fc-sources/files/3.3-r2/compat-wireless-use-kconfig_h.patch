diff -up compat-wireless-2012-01-24/include/linux/compat-2.6.h.orig compat-wireless-2012-01-24/include/linux/compat-2.6.h
--- compat-wireless-2012-01-24/include/linux/compat-2.6.h.orig	2012-01-26 11:05:25.687613527 -0500
+++ compat-wireless-2012-01-24/include/linux/compat-2.6.h	2012-01-26 11:05:48.997322113 -0500
@@ -2,7 +2,9 @@
 #define LINUX_26_COMPAT_H
 
 #include <linux/version.h>
-#if (LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,33))
+#if (LINUX_VERSION_CODE >= KERNEL_VERSION(3,1,0))
+#include <linux/kconfig.h>
+#elif (LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,33))
 #include <generated/autoconf.h>
 #else
 #include <linux/autoconf.h>
